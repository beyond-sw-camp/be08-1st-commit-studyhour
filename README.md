> # íŒ€ COMMIT

![ì»¤ë°‹ ë² ë„ˆ](https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/144869429/df644c10-cab5-4ed8-a1e4-566d9f04387d)



# ğŸ¸ í”„ë¡œì íŠ¸ ë©¤ë²„

|<img src="https://github.com/kanghana1/RideTogetherHYU_BE/assets/107329874/78c03ba2-f2c6-4d96-9ae9-9e3276c8a7a3" width="160" height="150"/>|<img src="https://github.com/kanghana1/RideTogetherHYU_BE/assets/107329874/05c30e5c-2398-4607-abe3-7950ed114719" width="160" height="150"/>|<img src="https://github.com/kanghana1/RideTogetherHYU_BE/assets/107329874/5d91160f-23c1-4c30-9808-002706ef715e" width="160" height="150"/>|<img src="https://avatars.githubusercontent.com/u/107329874?v=4" width="160" height="150"/>|<img src="https://github.com/kanghana1/RideTogetherHYU_BE/assets/107329874/2f170cdf-cef9-4ec0-9035-c77b742cde0e" width="160" height="150"/>|
|:-:|:-:|:-:|:-:|:-:|
|ğŸŒ½ê³„ìš©ìš´ğŸŒ½<br/>[@yongun2](https://github.com/yongun2) | ğŸ«ìœ¤í˜¸ì—°ğŸ«<br/>[@hoyeon96](https://github.com/hoyeon96) | ğŸ¥¬ì„œí˜„ì§€ğŸ¥¬<br/>[@henhen7](https://github.com/henhen7) | ğŸ¥”ê°•í•˜ë‚˜ğŸ¥”<br/>[@kanghana1](https://github.com/kanghana1)|ğŸ¥•ì´ì£¼í¬ğŸ¥•<br/>[@juhi0916](https://github.com/juhi0916)



<br>

# âœ¨ í”„ë¡œì íŠ¸ ì„¤ëª…


StudyHour : COMMIT to Success;
ì•ˆë…•í•˜ì„¸ìš”ğŸ¸ COMMITì¡°ì…ë‹ˆë‹¤.
ì—¬ëŸ¬ë¶„ë“¤ì€ ìŠ¤í„°ë””ì•±ì„ ì‚¬ìš©í•´ë³¸ì  ìˆìœ¼ì‹ ê°€ìš”?


![ê°œìš”](https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/144869429/7abfe76b-ec6f-4c3c-be86-f55561bd5558)

ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ê´€ì‹¬ì„ ë°›ê³  ê¾¸ì¤€íˆ ì‹ ê·œì•±ì—ì„œëŠ” AI ë„ì…, ê¸ˆì „ì  ë³´ìƒ ë“±ì„ ë„ì…í•˜ê³  ìˆìŠµë‹ˆë‹¤.

COMMITì€ ë§ì€ ì‚¬ëŒë“¤ì´ ìì‹ ì˜ ëª©í‘œì— ë‹¤ê°€ê°ˆ ìˆ˜ ìˆë„ë¡ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥, ë™ê¸°ë¶€ì—¬ ê¸°ëŠ¥ ë“±ì„ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.

íš¨ìœ¨ì ì´ê³  ìŠ¤ë§ˆíŠ¸í•œ í•™ìŠµì„ ë„ì™€ì£¼ëŠ” StudyHourì„ ì†Œê°œí•©ë‹ˆë‹¤.


ğŸ”· ë§ì¶¤í˜• í•™ìŠµ í”Œë˜ë„ˆ

ìŠ¤í„°ë””ì•±ì€ ì—¬ëŸ¬ë¶„ì˜ í•™ìŠµ ìŠ¤íƒ€ì¼ê³¼ ëª©í‘œì— ë§ì¶˜ ë§ì¶¤í˜• í•™ìŠµ í”Œë˜ë„ˆë¥¼ ì œê³µí•©ë‹ˆë‹¤. 
ëª©í‘œì— ìµœì í™”ëœ ì¼ì¼, ì£¼ê°„ ëª©í‘œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· ê°•ë ¥í•œ í•™ìŠµ ë„êµ¬

íƒ€ì´ë¨¸ ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì§‘ì¤‘ë ¥ì„ ë†’ì´ê³  íš¨ìœ¨ì ì¸ í•™ìŠµ ì‹œê°„ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥

ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ìŠ¤í„°ë”” ê·¸ë£¹ì„ ë§Œë“¤ì–´ í•™ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì‹œê°„ ì±„íŒ…, íŒŒì¼ ê³µìœ ,
ê³µë™ ë…¸íŠ¸ ì‘ì„± ê¸°ëŠ¥ì„ í†µí•´ íš¨ìœ¨ì ì¸ ê·¸ë£¹ ìŠ¤í„°ë””ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· ì„±ê³¼ ì¶”ì  ë° ë¶„ì„

íŒ€ì›ë“¤ê³¼ í•™ìŠµì— ëŒ€í•œ ê³„íšì„ ì„œë¡œ ì´ëª¨í‹°ì½˜ìœ¼ë¡œ ì†Œí†µí•˜ì—¬ ë³´ë‹¤ íš¨ê³¼ì ì¸ í•™ìŠµ ì „ëµì„ ì„¸ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· í•™ìŠµ ë™ê¸°ë¶€ì—¬

ììœ¨ì ìœ¼ë¡œ ë¯¸ì´í–‰ì‹œ ë²Œê¸ˆ ë¶€ì—¬ ë°©ì‹ì„ ì ìš©í•˜ì—¬ í•™ìŠµ ë™ê¸°ë¶€ì—¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ”· ê²Œì‹œíŒ ë° ëŒ“ê¸€ ê¸°ëŠ¥

ìŠ¤í„°ë””ì•±ì€ ì‚¬ìš©ìë“¤ì´ ì„œë¡œ ì†Œí†µí•˜ê³  ì •ë³´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆëŠ” ê²Œì‹œíŒ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
ì»¤ë®¤ë‹ˆí‹°ë¥¼ í˜•ì„±í•˜ê³ , ì„œë¡œì˜ ì§€ì‹ì„ ë‚˜ëˆ„ë©° í•¨ê»˜ ì„±ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

StudyHourê³¼ í•¨ê»˜ë¼ë©´ í•™ìŠµì´ ë” ì´ìƒ ì–´ë µì§€ ì•ŠìŠµë‹ˆë‹¤. 
StudyHour, ë‹¹ì‹ ì˜ í•™ìŠµì„ í˜ì‹ í•˜ë‹¤.


<br>

---

# ğŸ“Œ í”„ë¡œì íŠ¸ ëª©í‘œ

1. **ì„œë¹„ìŠ¤ ê¸°íš ë° ê¸°ëŠ¥ ëª…ì„¸ì„œ ì‘ì„±**: ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì „ë°˜ì ì¸ ì´í•´ì™€ íŒŒì•…ì„ ìœ„í•´ ì„œë¹„ìŠ¤ ê¸°íšê³¼ ê¸°ëŠ¥ ëª…ì„¸ì„œë¥¼ ì‘ì„±í•œë‹¤.
2. **ER ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±**: ì„œë¹„ìŠ¤ì— í•„ìš”í•œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë…¼ë¦¬ì  êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ ER ë‹¤ì´ì–´ê·¸ë¨ì„ ì‘ì„±í•©ë‹ˆë‹¤.
3. **ë°ì´í„°ë² ì´ìŠ¤ ë…¼ë¦¬ì  ëª¨ë¸ë§**: ER ë‹¤ì´ì–´ê·¸ë¨ì„ ë°”íƒ•ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë…¼ë¦¬ì  ëª¨ë¸ì„ ì„¤ê³„í•œë‹¤.
4. **ë°ì´í„°ë² ì´ìŠ¤ ë¬¼ë¦¬ì  ëª¨ë¸ë§**: ë…¼ë¦¬ì  ëª¨ë¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ë¬¼ë¦¬ì  êµ¬ì¡°ë¥¼ ì •ì˜í•œë‹¤.
5. **ë°ì´í„°ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸**: ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°°í¬ ì „ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì² ì €íˆ í…ŒìŠ¤íŠ¸í•˜ì—¬ ì•ˆì •ì ì¸ ë°°í¬ë¥¼ ìˆ˜í–‰í•œë‹¤.
6. **ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ ë°°í¬**: Ubuntu ìš´ì˜ì²´ì œì™€ MariaDB ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë¥¼ ë°°í¬í•œë‹¤.

---
## ğŸ“š ê¸°ìˆ  ìŠ¤íƒ

&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=GitHub&logoColor=white&color=black"></a></a>
&nbsp;&nbsp;&nbsp;&nbsp;<img src="https://img.shields.io/badge/Git-F05032?style=flat&logo=Git&logoColor=white&color=ffa500"></a></a>
&nbsp;&nbsp;&nbsp;<img src="https://img.shields.io/badge/MariaDB-003545?style=flat&logo=MariaDB&logoColor=white"/></a>
<br>

---
<br>

# ğŸ§ í”„ë¡œì íŠ¸ êµ¬í˜„

> ## ğŸ¢ **ê¸°ëŠ¥ ëª…ì„¸ì„œ**

> #### ìœ ì € 
> <img width="1108" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 54 30" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/eeb32737-972f-4c54-9660-575afe9222bb">

> #### ìŠ¤í„°ë””ë£¸
> ![Screenshot_20240531_140908_Sheets](https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/52b2a224-5fef-4a79-8b21-07afa2bf0b78)

> #### ì£¼ê°„ ê³„íš 
> <img width="1115" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 55 15" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/d7ae4853-2614-4fd9-9765-b81a56d19304">

> #### ì£¼ê°„ ê³„íš ì¸ì¦
> <img width="1111" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 55 41" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/4b25a1db-878f-4947-bcd7-dbda02c3ed27">

> #### íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ 
> <img width="1112" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 55 25" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/b46e8ccf-d3c3-46f3-b138-fd50a6151bd4">

> #### ê²Œì‹œíŒ 
> <img width="1115" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 55 51" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/7dfa6e21-e424-4b03-b04b-0d3b6bf18e07">

> #### íƒ€ì´ë¨¸
> <img width="1113" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 56 01" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/2b254430-0583-485b-b442-1551b3496b66">

> #### ë²Œê¸ˆ
> <img width="1114" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 56 08" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/3c390cdd-784c-4b7a-8b4c-140b0a400ba4">

> #### í†µê³„
> <img width="1114" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 56 18" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/5418a8e7-6254-4ac4-99ca-19cc9a7b3c4d">

> ### **E-R Diragram**
>> ![Beyond-Sw-Camp-DB-á„‘á…³á„…á…©á„Œá…¦á†¨á„á…³](https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/6ec48a09-ce2d-48bd-9f77-378e57521a9a)
>> ![Beyond-Sw-Camp-DB-á„‘á…³á„…á…©á„Œá…¦á†¨á„á…³ (1)](https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/65017d15-e004-481a-8acb-db98244c17cc)


> ## **âš¡ë…¼ë¦¬ì  ëª¨ë¸ë§**
> <img width="1067" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-05-31 á„‹á…©á„’á…® 1 48 25" src="https://github.com/beyond-sw-camp/be08-1st-commit-studyhour/assets/76439014/bfd1bd46-ff87-403a-a1ee-7365ba1ea61e">

> ## **ğŸ“–DDL**
> #### ì»¬ëŸ¼ëª… ì»¨ë²¤ì…˜
> 1. pkëŠ”  [í…Œì´ë¸” physical name]_id ë¡œ í†µì¼
> 2. date íƒ€ì…ì€ ë§ˆì§€ë§‰ì„ _date, datetimeì€ ë§ˆì§€ë§‰ì„ date_time
> 3. ì»¬ëŸ¼ëª… ì¤„ì´ì§€ ë§ê³  ìµœëŒ€í•œ í’€ì–´ì„œ ì“°ê¸°
> 4. pkë¥¼ ì œì™¸í•œ ì†ì„±ì—ëŠ” ê°€ëŠ¥í•˜ë©´ í…Œì´ë¸” ì´ë¦„ í¬í•¨ ì•ˆí•˜ê¸°
> 5. ì•„ì´ë”” : username
> 6. ë‹‰ë„¤ì„ : nickname

```sql
USE study_hour;

-- ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ ë¹„í™œì„±í™”
SET FOREIGN_KEY_CHECKS = 0;
DROP TABLE IF EXISTS USER;
DROP TABLE IF EXISTS USER_PROFILE;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER_TODO;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER_FINE;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER_WEEKLY_PLAN_EVALUATION;
DROP TABLE IF EXISTS STUDY_ROOM;
DROP TABLE IF EXISTS STUDY_ROOM_CATEGORY;
DROP TABLE IF EXISTS STUDY_ROOM_BOARD;
DROP TABLE IF EXISTS STUDY_ROOM_BOARD_COMMENT;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER_WEEKLY_PLAN;
DROP TABLE IF EXISTS STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION;
DROP TABLE IF EXISTS STATISTICS;
-- ì™¸ë˜ í‚¤ ì œì•½ ì¡°ê±´ í™œì„±í™”
SET FOREIGN_KEY_CHECKS = 1;
# CREATE TABLE `STATISTICS`
# (
#     `study_room_id`    INT          NOT NULL,
#     `participant_id`   INT          NOT NULL,
#     `study_room_round` INT          NOT NULL,
#     `attendance`       VARCHAR(255) NULL,
#     `todo_achievement` VARCHAR(255) NULL,
#     `pay_fine`         VARCHAR(255) NULL
# );


CREATE TABLE `USER`
(
    `user_id`  INT PRIMARY KEY AUTO_INCREMENT,
    `username` VARCHAR(15) UNIQUE NOT NULL,
    `password` VARCHAR(64)        NOT NULL,
    `nickname` VARCHAR(10) UNIQUE NOT NULL,
    `gender`   ENUM ('M','F')     NOT NULL
);

CREATE TABLE `USER_PROFILE`
(
    `user_profile_id`   INT PRIMARY KEY AUTO_INCREMENT,
    `user_id`           INT          NOT NULL,
    `age`               TINYINT      NULL,
    `interest`          VARCHAR(255) NULL,
    `state_message`     VARCHAR(100) NULL,
    `profile_image_url` VARCHAR(255) NULL,
    FOREIGN KEY (user_id) REFERENCES USER (user_id)
);

CREATE TABLE `STUDY_ROOM_MEMBER`
(
    `study_room_member_id` INT PRIMARY KEY AUTO_INCREMENT,
    `user_id`              INT                        NOT NULL,
    `study_room_id`        INT                        NOT NULL,
    `is_join_accepted`     BOOLEAN                    NOT NULL,
    `privilege`            ENUM ('MANAGER', 'MEMBER') NULL DEFAULT NULL,
    `join_date_time`       TIMESTAMP                  NOT NULL,
    FOREIGN KEY (user_id) REFERENCES USER (user_id),
    FOREIGN KEY (study_room_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);

CREATE TABLE `STUDY_ROOM_MEMBER_FINE`
(
    `study_room_member_fine_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_member_id`      INT NOT NULL,
    `get_fine_round`            INT NOT NULL,
    `fine_amount`               INT NOT NULL DEFAULT 0 CHECK (fine_amount BETWEEN 0 AND 100000),
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);



CREATE TABLE `STUDY_ROOM_MEMBER_TODO`
(
    `study_room_member_todo_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_member_id`      INT          NOT NULL,
    `content`                   VARCHAR(200) NULL,
    `created_date`              DATE         NOT NULL,
    `is_checked`                BOOLEAN      NOT NULL DEFAULT FALSE,
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);

CREATE TABLE STUDY_ROOM_CATEGORY
(
    study_room_category_id INT PRIMARY KEY AUTO_INCREMENT,
    name                   VARCHAR(24) UNIQUE NOT NULL
);

CREATE TABLE `STUDY_ROOM`
(
    `study_room_id`          INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_category_id` INT                    NOT NULL,
    `name`                   VARCHAR(30)            NOT NULL,
    `is_public`              boolean                NOT NULL,
    `private_password`            VARCHAR(64)           NULL,
    `description`            VARCHAR(500)           NULL,
    `max_capacity`           TINYINT                NOT NULL CHECK (max_capacity BETWEEN 2 AND 30),
    `authentication_method`  ENUM ('TIME', 'PHOTO') NOT NULL,
    `fine`                   INT                    NOT NULL DEFAULT 0 CHECK ((fine BETWEEN 0 AND 100000) AND (fine % 1000 = 0)),
    `current_study_round`    INT                    NOT NULL DEFAULT 1,
    `start_date_time`        TIMESTAMP              NOT NULL,
    `end_date_time`          TIMESTAMP              NOT NULL,
    `created_date_time`      TIMESTAMP              NOT NULL,
    `is_finished`            BOOLEAN                NOT NULL DEFAULT TRUE,
    FOREIGN KEY (study_room_category_id) REFERENCES STUDY_ROOM_CATEGORY (study_room_category_id)
);

CREATE TABLE `STUDY_ROOM_BOARD`
(
    `study_room_board_id`  INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_id`        INT           NOT NULL,
    `study_room_member_id` INT           NOT NULL,
    `title`                VARCHAR(50)   NOT NULL,
    `content`              VARCHAR(1000) NOT NULL,
    `created_date_time`    TIMESTAMP     NOT NULL,
    FOREIGN KEY (study_room_id) REFERENCES STUDY_ROOM (study_room_id),
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);

CREATE TABLE `STUDY_ROOM_BOARD_COMMENT`
(
    `study_room_board_comment_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_board_id`         INT          NOT NULL,
    `study_room_member_id`        INT          NOT NULL,
    `content`                     VARCHAR(200) NOT NULL,
    `created_date_time`           TIMESTAMP    NOT NULL,
    FOREIGN KEY (study_room_board_id) REFERENCES STUDY_ROOM_BOARD (study_room_board_id),
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);

CREATE TABLE `STUDY_ROOM_MEMBER_WEEKLY_PLAN`
(
    `study_room_member_weekly_plan_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_id`                    INT          NOT NULL,
    `study_room_member_id`             INT          NOT NULL,
    `plan_detail`                      VARCHAR(500) NULL,
    `plan_duration`                    INT          NULL,
    `created_date_time`                TIMESTAMP    NOT NULL,
    `weekly_plan_round_number`         INT          NOT NULL,
    FOREIGN KEY (study_room_id) REFERENCES STUDY_ROOM (study_room_id),
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);

CREATE TABLE `STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION`
(
    `study_room_member_weekly_plan_verification_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_member_weekly_plan_id`              INT          NOT NULL,
    `image_url`                                     VARCHAR(255) NULL,
    `create_date_time`                              TIMESTAMP    NOT NULL,
    FOREIGN KEY (study_room_member_weekly_plan_id) REFERENCES STUDY_ROOM_MEMBER_WEEKLY_PLAN (study_room_member_weekly_plan_id)
);

CREATE TABLE `STUDY_ROOM_MEMBER_WEEKLY_PLAN_EVALUATION`
(
    `study_room_member_weekly_plan_evaluation_id` INT PRIMARY KEY AUTO_INCREMENT,
    `study_room_member_weekly_plan_id`            INT        NOT NULL,
    `study_room_member_id`                        INT        NOT NULL,
    `evaluation_date_time`                        TIMESTAMP  NOT NULL,
    `evaluation_icon`                             VARCHAR(2) NOT NULL,
    FOREIGN KEY (study_room_member_weekly_plan_id) REFERENCES STUDY_ROOM_MEMBER_WEEKLY_PLAN (study_room_member_weekly_plan_id),
    FOREIGN KEY (study_room_member_id) REFERENCES STUDY_ROOM_MEMBER (study_room_member_id)
);
```

# ğŸ¸ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ìƒì„±
> ## **ìœ ì €**
<details>
<summary>ì‹ ê·œ íšŒì› ê°€ì…</summary>
<div markdown="1">

```sql

    # [1.3] [ì‹ ê·œ íšŒì› ê°€ì…] T
    INSERT INTO `USER` (username, password, nickname, gender) VALUES
    ('hoya', '1q2w3e4r!', 'hwsc', 'M');
```

</div>
</details>

<details>
<summary>íšŒì› íƒˆí‡´</summary>
<div markdown="1">

```sql

    use study_hour;

-- ê²Œì‹œíŒ, ëŒ“ê¸€ í…Œì´ë¸”ì€ ì‚´ë¦°ë‹¤.
-- íƒˆí‡´ìì— ëŒ€í•œ ì£¼ê°„ ê³„íš, í‰ê°€, ì¸ì¦, ë²Œê¸ˆ í…Œì´ë¸” ì‚­ì œ
DELIMITER $$
CREATE OR REPLACE TRIGGER DELETE_LEAVING_MEMBER_HISTORY
    AFTER UPDATE
    ON USER
    FOR EACH ROW
BEGIN
    IF NEW.username LIKE 'íƒˆí‡´%' AND NEW.nickname LIKE 'íƒˆí‡´%'
    THEN
        -- íƒˆí‡´ ìœ ì € ì£¼ê°„ ê³„íš ì¸ì¦ ì‚­ì œ
        DELETE
        FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION
        WHERE study_room_member_weekly_plan_id in (SELECT p.study_room_member_weekly_plan_id
                                                   FROM STUDY_ROOM_MEMBER m
                                                            INNER JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN p
                                                                       ON m.study_room_member_id = p.study_room_member_id
                                                   WHERE m.user_id = OLD.user_id);

        -- íƒˆí‡´ ìœ ì € ì£¼ê°„ ê³„íšì— ëŒ€í•œ í‰ê°€ ì‚­ì œ
        DELETE
        FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_EVALUATION
        WHERE study_room_member_weekly_plan_id IN (SELECT p.study_room_member_weekly_plan_id
                                                   FROM STUDY_ROOM_MEMBER m
                                                            INNER JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN p
                                                                       ON m.study_room_member_id = p.study_room_member_id
                                                   WHERE m.user_id = OLD.user_id);

        -- íƒˆí‡´ ìœ ì € ì£¼ê°„ ê³„íš ì‚­ì œ
        DELETE
        FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN
        WHERE study_room_member_id = (SELECT m.study_room_member_id
                                      FROM STUDY_ROOM_MEMBER m
                                      WHERE m.user_id = OLD.user_id);

        -- íƒˆí‡´ ìœ ì € ë²Œê¸ˆ ì‚­ì œ
        DELETE
        FROM STUDY_ROOM_MEMBER_FINE
        WHERE study_room_member_id in (SELECT m.study_room_member_id
                                       FROM STUDY_ROOM_MEMBER m
                                       WHERE m.user_id = OLD.user_id);

        -- íƒˆí‡´ ìœ ì € íˆ¬ë‘ ì‚­ì œ
        DELETE
        FROM STUDY_ROOM_MEMBER_TODO
        WHERE STUDY_ROOM_MEMBER_TODO.study_room_member_id in (SELECT t.study_room_member_id
                                                              FROM STUDY_ROOM_MEMBER m
                                                                       INNER JOIN STUDY_ROOM_MEMBER_TODO t
                                                                                  ON m.study_room_member_id = t.study_room_member_id
                                                              WHERE m.user_id = OLD.user_id);
    END IF;
END $$
DELIMITER ;

# íƒˆí‡´ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„° ì¶”ê°€
INSERT INTO USER (username, password, nickname, gender)
VALUES ('íƒˆí‡´ ìœ ì € 1', '1234', 'íƒˆí‡´ ë‹‰ë„¤ì„ 1', 'M'),
       ('íƒˆí‡´ ìœ ì € 2', '1234', 'íƒˆí‡´ ë‹‰ë„¤ì„ 2', 'M');

# 'Giselbert ìœ ì € íƒˆí‡´'
UPDATE USER
SET username = CONCAT('íƒˆí‡´ ìœ ì € ', (SELECT COUNT(*) + 1 AS 'NEXT_COUNT'
                                 FROM USER
                                 WHERE username LIKE 'íƒˆí‡´ ìœ ì €%'
                                   AND nickname LIKE 'íƒˆí‡´ ë‹‰ë„¤ì„%')),
    nickname = CONCAT('íƒˆí‡´ ë‹‰ë„¤ì„ ', (SELECT COUNT(*) + 1 AS 'NEXT_COUNT'
                                  FROM USER
                                  WHERE username LIKE 'íƒˆí‡´ ìœ ì €%'
                                    AND nickname LIKE 'íƒˆí‡´ ë‹‰ë„¤ì„%')),
    password = NULL,
    gender   = NULL
WHERE username = 'Giselbert';

SELECT *
FROM USER;


SELECT *
FROM STUDY_ROOM_MEMBER m
         INNER JOIN USER u ON m.user_id = u.user_id
         LEFT JOIN STUDY_ROOM_MEMBER_TODO todo ON m.study_room_member_id = todo.study_room_member_id
         LEFT JOIN STUDY_ROOM_MEMBER_FINE fine ON m.study_room_member_id = fine.study_room_member_id
         LEFT JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN plan ON m.study_room_member_id = plan.study_room_member_id
         LEFT JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION v
                   ON plan.study_room_member_weekly_plan_id = v.study_room_member_weekly_plan_id
WHERE m.study_room_id = 1
  AND username LIKE 'íƒˆí‡´%';

```

</div>
</details>

> ## **ìŠ¤í„°ë””ë£¸**
<details>
<summary>ìŠ¤í„°ë””ë£¸ ìƒì„±</summary>
<div markdown="1">

```sql

-- 12ë²ˆ ìœ ì €ê°€ 'ë‹¹ê·¼ë§ˆì¼“ í´ë¡  í”„ë¡œì íŠ¸'ë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í„°ë””ë£¸ ê°œì„¤ (ë¹„ê³µê°œ)
INSERT INTO study_room (study_room_category_id, `name`, is_public, private_password, `description`, 
								max_capacity, start_date_time, end_date_time, created_date_time, is_finished) VALUES
(3,'ë‹¹ê·¼ë§ˆì¼“ í´ë¡  í”„ë¡œì íŠ¸',0,'asdf1020','ë‹¹ê·¼ë§ˆì¼“ í´ë¡  í”„ë¡œì íŠ¸ ëª¨ì„ì…ë‹ˆë‹¤.', 
6, '2024-06-01 12:12:13', '2024-12-06 05:00:00', '2024-05-31 17:12:31', FALSE);

-- ìŠ¤í„°ë””ë£¸ ìƒì„±í•˜ë©´ì„œ ë™ì‹œì— ìŠ¤í„°ë””ë£¸ ë©¤ë²„ì— ë°©ì¥ìœ¼ë¡œì¨ ë°ì´í„° ì‚½ì…ë˜ì–´ì•¼í•¨
INSERT INTO study_room_member (user_id, study_room_id, is_join_accepted, privilege, join_date_time)
VALUES (12, 3, 1, 'MANAGER', '2024-05-31 17:12:31');

```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ë£¸ ì •ë³´ ìˆ˜ì •</summary>
<div markdown="1">

```sql

--	3ë²ˆ ìŠ¤í„°ë””ë£¸ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ë° ì¸ì›ìˆ˜ ì¡°ì •, ë²Œê¸ˆ ì¶”ê°€
UPDATE study_room
SET	private_password = '',
		max_capacity = 7,
		fine = 1000
WHERE study_room_id = 3;

-- * ìŠ¤í„°ë””ë£¸ ìƒì„±í•˜ë©´ì„œ ë™ì‹œì— ìŠ¤í„°ë””ë£¸ ë©¤ë²„ì— ë°©ì¥ìœ¼ë¡œì¨ ë°ì´í„° ì‚½ì…ë˜ì–´ì•¼í•¨
INSERT INTO study_room_member (user_id, study_room_id, is_join_accepted, privilege, join_date_time) VALUES
(12, 3, 1, 'MANAGER','2024-05-31 17:12:31');

```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­</summary>
<div markdown="1">

```sql

# [2.3.1] [ê³µê°œ ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­] T
-- 13ë²ˆ ìœ ì € 1ë²ˆ ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­
INSERT INTO study_room_member (user_id, study_room_id, is_join_accepted, join_date_time) VALUES
(13, 1, 0, '2024-06-01 11:00:20');

# [2.4.1] [ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­ë‚´ì—­ ì¡°íšŒ] T
-- 1ë²ˆ ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­ ë‚´ì—­ ì¡°íšŒ(1ë²ˆ ìŠ¤í„°ë””ë£¸ ë°©ì¥)
SELECT u.nickname,
		 u.gender,
		 up.profile_image_url,
		 srm.join_date_time
FROM study_room_member srm
INNER JOIN `user` u ON srm.user_id = u.user_id
LEFT OUTER JOIN user_profile up ON u.user_id = up.user_id
WHERE is_join_accepted = 0
AND study_room_id = 1
;

# [2.4.2] [ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­ ìˆ˜ë½] T
-- ì•„ì´ë”” hoya ìœ ì €(user_id = 13) ì‹ ì²­ ê°€ì… í—ˆê°€
UPDATE study_room_member
SET is_join_accepted = 1,
 	 privilege = 'MEMBER'
WHERE user_id = ( SELECT user_id FROM `user` WHERE `nickname` = 'hwsc' );


# [2.4.3] [ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­ ê±°ë¶€] T
-- ì‚­ì œ ì¼€ì´ìŠ¤ë¥¼ ìœ„í•´ ì‹ ì²­ ë‚´ì—­ ì¶”ê°€(nickname = Walczak)
INSERT INTO study_room_member (user_id, study_room_id, is_join_accepted, join_date_time) VALUES
(5, 1, 0, '2024-06-01 11:00:20');

SELECT * 
FROM study_room_member;

-- 5ë²ˆ ìœ ì €(Neddy)ì˜ 1ë²ˆ ìŠ¤í„°ë””ë£¸ ì°¸ê°€ ì‹ ì²­ì„ ê±°ë¶€í•¨ì— ë”°ë¥¸ ì‚­ì œ
DELETE
FROM study_room_member
WHERE privilege IS NULL
AND study_room_id = 1
AND user_id = (SELECT user_id FROM `user` WHERE `nickname` = 'Walczak')
;

SELECT * 
FROM study_room_member;

```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ë£¸ ì „ì²´ ëª©ë¡ ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [2.5.1] [ìŠ¤í„°ë””ë£¸ ì „ì²´ ì¡°íšŒ (ì „ì²´ ì¡°íšŒ í™”ë©´)] T
SELECT r.`name`, r.is_public, r.`description`, r.max_capacity, c.`name` AS 'category'
FROM study_room r
INNER JOIN study_room_category c ON c.study_room_category_id = r.study_room_category_id
ORDER BY created_date_time DESC, is_finished ASC;

# [2.5.2] [ìŠ¤í„°ë””ë£¸ í•„í„°ë§ ì¡°íšŒ] T
-- ì§„í–‰ì¤‘ì¸ ê³µê°œ ìŠ¤í„°ë””ë£¸ ì¡°íšŒ
SELECT r.`name`, 
		 r.is_public,
		 r.`description`, 
		 r.max_capacity, 
		 c.`name` AS 'category',
		 r.created_date_time,
		 r.end_date_time,
FROM study_room r
INNER JOIN study_room_category c ON c.study_room_category_id = r.study_room_category_id
WHERE r.is_public = 1
AND 	r.end_date_time >= NOW()
;

# [2.5.3] [ìŠ¤í„°ë””ë£¸ ìƒì„¸ ì¡°íšŒ] T
-- 2ë²ˆ ìŠ¤í„°ë””ë£¸ ìƒì„¸ ì¡°íšŒ
-- id ì»¬ëŸ¼ ì œì™¸ ëª¨ë“  ì»¬ëŸ¼ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ í”„ë¡œì‹œì € ìƒì„±
DELIMITER $$

CREATE OR REPLACE PROCEDURE select_study_room(
	IN id INT(11)
)
BEGIN
    DECLARE columns_list VARCHAR(1000);

    -- Construct the column list excluding `study_room_id`
    SELECT GROUP_CONCAT(CONCAT('r.', COLUMN_NAME) SEPARATOR ', ')
    INTO columns_list
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE TABLE_NAME = 'study_room'
    AND COLUMN_NAME != 'study_room_id'
    AND COLUMN_NAME != 'study_room_category_id';

    -- Construct the query
    SET @query = CONCAT('SELECT c.`name` AS category, ', columns_list, 
                        ' FROM study_room r INNER JOIN study_room_category c ',
                        ' ON c.study_room_category_id = r.study_room_category_id ',
                        ' WHERE r.study_room_id = ', id);

    -- Execute the query
    PREPARE stmt FROM @query;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END $$

DELIMITER ;

-- í”„ë¡œì‹œì € í˜¸ì¶œ
CALL select_study_room(2);

```

</div>
</details>

<details>
<summary>ë§ˆì´ ìŠ¤í„°ë””ë£¸ ì¡°íšŒ</summary>
<div markdown="1">

```sql

-- is_join_acceptedë¡œ ìŠ¤í„°ë””ê·¸ë£¹ ì°¸ì—¬ ê°€ëŠ¥ ì—¬ë¶€ê°€ ê°ˆë¦¼

-- starlaê°€ ë§ˆì´ ìŠ¤í„°ë””ë£¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•œë‹¤ê³  ê°€ì •
-- [2.6.1] ë§ˆì´ìŠ¤í„°ë””ë£¸ ì¡°íšŒ (ìŠ¤í„°ë””ë£¸ ì´ë¦„, ì¢…ë£Œì—¬ë¶€)
SELECT sr.name, if(sr.is_finished, 'end (ì¢…ë£Œ)', 'proceeding (ì§„í–‰ì¤‘)') AS 'ì¢…ë£Œì—¬ë¶€'
FROM study_room_member srm
INNER JOIN user u ON u.user_id = srm.user_id
INNER JOIN study_room sr ON sr.study_room_id = srm.study_room_id
WHERE u.username = 'starla'
;

-- [2.6.2] ë§ˆì´ ìŠ¤í„°ë””ë£¸ ìƒì„¸ ì¡°íšŒ (ìŠ¤ë£¸ ì´ë¦„, ì†Œê°œ, ì¹´í…Œê³ ë¦¬ëª…, ìŠ¤í„°ë”” ìµœëŒ€ì¸ì›, ì‹œì‘/ë ë‚ ì§œ)
-- ë·° ìƒì„±
CREATE VIEW my_study_room_view AS
SELECT u.username,
		 sr.name AS 'study_group_name', 
		 src.name AS 'category',
		 sr.description,
		 sr.max_capacity,
		 sr.start_date_time,
		 sr.end_date_time,
		 srmem.is_join_accepted,
		 sr.is_finished
FROM study_room_member srmem
INNER JOIN user u ON u.user_id = srmem.user_id
INNER JOIN study_room sr ON sr.study_room_id = srmem.study_room_id
INNER JOIN study_room_category src ON src.study_room_category_id = sr.study_room_category_id
WHERE srmem.is_join_accepted = TRUE
;

SELECT * FROM my_study_room_view
where username = 'starla'
AND study_group_name = 'ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°'
;


-- ìŠ¤í„°ë””ë£¸ ì°¸ê°€ì¤‘ì¸ ì¸ì›

SELECT sr.name, COUNT(*) AS 'ì°¸ê°€ì¸ì›', sr.max_capacity AS 'ìµœëŒ€ì¸ì›'
FROM study_room_member srmem
INNER JOIN study_room sr ON sr.study_room_id = srmem.study_room_id
WHERE srmem.is_join_accepted = TRUE
GROUP BY sr.name
HAVING sr.name = (SELECT sr.name FROM study_room_member srmem
											INNER JOIN user u ON u.user_id = srmem.user_id
											INNER JOIN study_room sr ON sr.study_room_id = srmem.study_room_id
						WHERE u.username = 'starla')
;


```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ë£¸ í‡´ì¥</summary>
<div markdown="1">

```sql

-- [2.7.1] ìŠ¤í„°ë””ë£¸ í‡´ì¥
-- is_join_acceptë¥¼ falseë¡œ ë°”ê¾¸ê³ , ê¶Œí•œ ì—†ì• ê¸°
UPDATE study_room_member
SET is_join_accepted = false, privilege = null
WHERE user_id = (
						SELECT user_id FROM user
						WHERE username = 'starla'
					)
AND privilege = 'member'
;

-- [2.7.2] ìŠ¤í„°ë””ë£¸ ë¶€ì› ê°•í‡´
-- starlaê°€ ë°©ì¥ì´ë¼ë©´ lutherì„ ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°ì—ì„œ ê°•í‡´
DELIMITER $

CREATE OR REPLACE PROCEDURE outMemberProc(
    IN MEMBER VARCHAR(15),
    IN study_group VARCHAR(30)
)
BEGIN
    DECLARE manager_check BOOLEAN;

    -- starlaê°€ ë°©ì¥ì¸ì§€ í™•ì¸ (ë§ìœ¼ë©´ true, ì•„ë‹ˆë©´ false ë°˜í™˜) -> boolê°’ì„ manager_check ë³€ìˆ˜ì— ë‹´ìŒ
    SELECT IF(privilege = 'manager', TRUE, FALSE)
    INTO manager_check
    FROM study_room_member
    WHERE user_id = (
        SELECT user_id FROM user
        WHERE username = 'starla'
    );

    -- ë°©ì¥ì´ë¼ë©´, ë¶€ì›ì˜ ê¶Œí•œì„ nullë¡œ, ì°¸ê°€ì—¬ë¶€ë¥¼ falseë¡œ ë°”ê¿ˆìœ¼ë¡œì¨ íƒˆí‡´
    IF manager_check THEN
        UPDATE study_room_member
        SET is_join_accepted = FALSE, privilege = NULL
        WHERE user_id = (
            SELECT user_id FROM user
            WHERE username = MEMBER
        )
        AND study_room_id = (
            SELECT study_room_id FROM study_room
            WHERE name = study_group
        );
    END IF;
END $

DELIMITER ;

CALL outMemberProc('luther','ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°');

```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ë£¸ ë°©ì¥ ê¶Œí•œ ìœ„ì„</summary>
<div markdown="1">

```sql

-- 1ë²ˆ ìŠ¤í„°ë””ë£¸ ë°©ì¥ì¸ 1ë²ˆ ìœ ì €ê°€ 3ë²ˆìœ ì €ì—ê²Œ ë°©ì¥ ìœ„ì„
UPDATE study_room_member
SET privilege = 'member'
WHERE user_id = (SELECT user_id FROM `user` WHERE nickname = 'Luisetti') 
AND privilege = 'manager';

UPDATE study_room_member
	SET privilege = 'MANAGER'
 WHERE user_id = 
 (SELECT user_id FROM `user` WHERE nickname = 'Fliege') 
;

```

</div>
</details>

> ## **ì£¼ê°„ ê³„íš**
<details>
<summary>ì£¼ê°„ ê³„íš ìƒì„±</summary>
<div markdown="1">

```sql

# [3.1.1] [ì£¼ê°„ ê³„íš ìƒì„±] T
-- 12ë²ˆ user (hoya) ìƒˆë¡œìš´ 1ì£¼ì°¨ ì£¼ê°„ê³„íš ìƒì„±
INSERT INTO study_room_member_weekly_plan (study_room_id, study_room_member_id, plan_detail, created_date_time, weekly_plan_round_number) VALUES
(1, 12, 'solveSQL 5ë¬¸ì œí’€ê¸°', '2024-06-01 12:00:00', 1);

-- ìƒì„± í›„ ìƒì„±ëœ ë‚´ìš© í™”ë©´ì— ë„ìš°ê¸° ìœ„í•´ ì¡°íšŒ
SELECT u.nickname,
		 r.`name`,
		 wp.weekly_plan_round_number,
		 wp.plan_detail,
		 wp.created_date_time
FROM study_room_member_weekly_plan wp
INNER JOIN study_room r ON wp.study_room_id = r.study_room_id
INNER JOIN study_room_member m ON wp.study_room_member_id = m.study_room_member_id
INNER JOIN `user` u ON m.user_id = u.user_id
WHERE wp.study_room_member_id = 12;

```

</div>
</details>

<details>
<summary>ì£¼ê°„ ê³„íš ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [3.2.1] [ì£¼ê°„ ê³„íš ì¡°íšŒ] T

-- (Luisettiê°€ ë¡œê·¸ì¸ ìƒíƒœ) ë‚´ ì£¼ê°„ê³„íš ì¡°íšŒ
SELECT wp.weekly_plan_round_number,
		 wp.plan_detail,
		 wp.created_date_time
FROM study_room_member_weekly_plan wp
INNER JOIN study_room r ON wp.study_room_id = r.study_room_id
INNER JOIN study_room_member m ON wp.study_room_member_id = m.study_room_member_id
INNER JOIN `user` u ON m.user_id = u.user_id
WHERE wp.study_room_member_id = (SELECT srm.study_room_member_id
											FROM study_room_member srm
											INNER JOIN `user` u ON srm.user_id = u.user_id 
											WHERE u.nickname = 'Luisetti');

# [3.2.1] - 2  [ê°™ì€ ìŠ¤í„°ë””ë£¸ ì•ˆì˜ ì£¼ê°„ ê³„íš ì¡°íšŒ] T

-- (Luisettiê°€ ë¡œê·¸ì¸ ìƒíƒœ) ë‚´ê°€ ì°¸ì—¬í•˜ê³  ìˆëŠ” ìŠ¤í„°ë””ë£¸ì—ì„œ ë‹¤ë¥¸ ì‚¬ëŒ ì£¼ê°„ê³„íš ì¡°íšŒ

-- ë‚´ê°€ ì°¸ì—¬í•˜ê³  ìˆëŠ” ìŠ¤í„°ë””ë£¸ì˜ ì°¸ê°€ìë“¤ ë„ìš°ê¸°
CREATE OR REPLACE VIEW my_study_room_members_view AS 
SELECT u.nickname
FROM study_room_member srm
INNER JOIN `user` u ON u.user_id = srm.user_id
INNER JOIN study_room sr ON sr.study_room_id = srm.study_room_id
WHERE srm.is_join_accepted = TRUE
AND 	sr.study_room_id = (SELECT srm.study_room_id 
									 FROM  study_room_member srm
									 INNER JOIN `user` u ON u.user_id = srm.user_id
									 WHERE nickname = 'Luisetti')
;

SELECT * FROM my_study_room_members_view;
;


-- ê°™ì€ ìŠ¤í„°ë””ë£¸ì— ìˆëŠ” Fliegeì˜ ì£¼ê°„ ê³„íš ë³´ëŸ¬ ê°€ê¸°
DELIMITER $$
CREATE OR REPLACE PROCEDURE search_weekly_plan(
	IN clicked_nickname VARCHAR(10)
)
BEGIN 
	SELECT wp.weekly_plan_round_number,
			 wp.plan_detail,
			 wp.created_date_time
	FROM study_room_member_weekly_plan wp
	INNER JOIN study_room r ON wp.study_room_id = r.study_room_id
	INNER JOIN study_room_member m ON wp.study_room_member_id = m.study_room_member_id
	INNER JOIN `user` u ON m.user_id = u.user_id
	WHERE wp.study_room_member_id = (SELECT srm.study_room_member_id
												FROM study_room_member srm
												INNER JOIN `user` u ON srm.user_id = u.user_id 
												WHERE u.nickname = clicked_nickname);
END $$
DELIMITER ;

CALL search_weekly_plan('Fliege');
```

</div>
</details>

<details>
<summary>ì´ì „ ì‹œê°„ëŒ€ ì£¼ê°„ ê³„íš ìˆ˜ì • ê²½ê³  ì²˜ë¦¬</summary>
<div markdown="1">

```sql

# [3.5.1] [ì£¼ê°„ ê³„íš ìˆ˜ì •í•˜ê¸°] T
-- ë‚ ì§œ ì§€ë‚˜ë©´ ìˆ˜ì • ëª»í•˜ê²Œ í•˜ê¸°

-- ì´ì „ ì‹œê°„ëŒ€ ì£¼ê°„ ê³„íš ìˆ˜ì • ì‹œ ê²½ê³  ë©”ì„¸ì§€ ì¶œë ¥
DELIMITER $$

CREATE OR REPLACE TRIGGER update_time_check BEFORE UPDATE ON study_room_member_weekly_plan
FOR EACH ROW
BEGIN
    IF OLD.created_date_time < NOW() THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'í˜„ì¬ ì‹œê°„ë³´ë‹¤ ì´ì „ì¼ ì£¼ê°„ê³„íšì€ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
    END IF;
END $$

DELIMITER ;

-- 46ë²ˆ 'SQL SOLVE 100~105ë²ˆ í’€ê¸°'ë¡œ ìˆ˜ì •
UPDATE study_room_member_weekly_plan
SET plan_detail = 'SQL SOLVE 100~105ë²ˆ í’€ê¸°',
	 created_date_time = NOW()
WHERE study_room_member_weekly_plan_id = 46;

-- 46ë²ˆ 'SQL SOLVE 100~105ë²ˆ í’€ê¸°'ë¡œ ìˆ˜ì •
UPDATE study_room_member_weekly_plan
SET plan_detail = 'SQL SOLVE 100~105ë²ˆ í’€ê¸°',
	 created_date_time = NOW()
WHERE study_room_member_weekly_plan_id = 6;

```

</div>
</details>

<details>
<summary>ì£¼ê°„ ê³„íš í”¼ë“œë°±</summary>
<div markdown="1">

```sql

# [3.3.1] [ì£¼ê°„ ê³„íš í”¼ë“œë°± ì¶”ê°€] T
INSERT INTO study_room_member_weekly_plan_evaluation (study_room_member_weekly_plan_id,
																		study_room_member_id,
																		evaluation_date_time,
																		evaluation_icon) VALUES
(1,12,'2024-06-01 10:50:12','A');

SELECT * FROM study_room_member_weekly_plan_evaluation
ORDER BY study_room_member_weekly_plan_evaluation_id DESC
LIMIT 1;

# [3.3.1] - 2 [ì£¼ê°„ ê³„íš í”¼ë“œë°± ìˆ˜ì •] T

-- 1ë²ˆ ìœ ì €ê°€ 3ë²ˆ ìœ ì € ì£¼ê°„ê³„íš í‰ê°€ ì´ëª¨ì§€ë°”ê¾¸ê¸° 
UPDATE study_room_member_weekly_plan_evaluation
	SET evaluation_date_time = NOW(),
		 evaluation_icon = 'C'
 WHERE study_room_member_id = 1;

```

</div>
</details>

> ## **íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸**
<details>
<summary>íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìƒì„± ë° ì¡°íšŒ</summary>
<div markdown="1">

```sql

USE study_hour;

# íˆ¬ ë‘ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ í”„ë¡œì‹œì €
DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_TODO_ALL()
BEGIN
    SELECT r.name                                 AS 'ìŠ¤í„°ë””ë£¸',
           u.username                             AS 'ì‘ì„±ì',
           to_do.content                          AS 'ë‚´ìš©',
           to_do.created_date                     AS 'ì‘ì„±ì¼',
           IF(is_checked, 'CHECKED', 'UNCHECKED') AS 'ì²´í¬_ì—¬ë¶€'
    FROM STUDY_ROOM_MEMBER_TODO to_do
             INNER JOIN STUDY_ROOM_MEMBER m ON to_do.study_room_member_id = m.study_room_member_id
             INNER JOIN STUDY_ROOM r ON m.study_room_id = r.study_room_id
             INNER JOIN USER u ON m.user_id = u.user_id
    ORDER BY r.name;
END $$

DELIMITER ;

DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_TODO_BY_USERNAME(
    IN USERNAME VARCHAR(15)
)
BEGIN
    SELECT r.name                                 AS 'ìŠ¤í„°ë””ë£¸',
           u.username                             AS 'ì‘ì„±ì',
           to_do.content                          AS 'ë‚´ìš©',
           to_do.created_date                     AS 'ì‘ì„±ì¼',
           IF(is_checked, 'CHECKED', 'UNCHECKED') AS 'ì²´í¬_ì—¬ë¶€'
    FROM STUDY_ROOM_MEMBER_TODO to_do
             INNER JOIN STUDY_ROOM_MEMBER m ON to_do.study_room_member_id = m.study_room_member_id
             INNER JOIN STUDY_ROOM r ON m.study_room_id = r.study_room_id
             INNER JOIN USER u ON m.user_id = u.user_id
    WHERE u.username = USERNAME
    ORDER BY r.name;
END $$
DELIMITER ;

# [4.1.1] [íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ë‚´ìš© ì…ë ¥] T
-- Giselbert ê°€ ìŠ¤í„°ë””ë£¸ 1ë²ˆì—ì„œ íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì‘ì„±
INSERT INTO STUDY_ROOM_MEMBER_TODO (study_room_member_id, content, created_date)
    VALUE (3, 'íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì‘ì„± í…ŒìŠ¤íŠ¸', CURDATE());

CALL SELECT_STUDY_ROOM_MEMBER_TODO_BY_USERNAME('Giselbert');
# [4.2.1] [íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ] T
-- ì „ì²´ ìŠ¤í„°ë””ë£¸ ë‚´ ëª¨ë“  íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
CALL SELECT_STUDY_ROOM_MEMBER_TODO_ALL();

-- ìœ ì € ì•„ì´ë”” 'Giselbert'ê°€ ì‘ì„±í•œ íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
CALL SELECT_STUDY_ROOM_MEMBER_TODO_BY_USERNAME('Giselbert');

```

</div>
</details>

<details>
<summary>íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì •</summary>
<div markdown="1">

```sql

# [4.3.1] [íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì •] T
-- ìœ ì € ì•„ì´ë”” 'Giselbert'ê°€ ì‘ì„±í•œ íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì •
UPDATE STUDY_ROOM_MEMBER_TODO
SET content = 'íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì • í…ŒìŠ¤íŠ¸'
WHERE study_room_member_id = (SELECT study_room_member_id
                              FROM STUDY_ROOM_MEMBER m
                                       INNER JOIN USER u ON m.user_id = u.user_id
                              WHERE u.username = 'Giselbert');

CALL SELECT_STUDY_ROOM_MEMBER_TODO_BY_USERNAME('Giselbert');

```

</div>
</details>

<details>
<summary>íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì‚­ì œ</summary>
<div markdown="1">

```sql

# [4.4.1] [íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì‚­ì œ] T
-- ìœ ì € ì•„ì´ë”” 'Giselbert' ê°€ ì‘ì„±í•œ íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì •
UPDATE STUDY_ROOM_MEMBER_TODO
SET content = 'íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ìˆ˜ì • í…ŒìŠ¤íŠ¸'
WHERE study_room_member_todo_id = (SELECT to_do.study_room_member_todo_id
                                   FROM STUDY_ROOM_MEMBER_TODO to_do
                                            INNER JOIN STUDY_ROOM_MEMBER m
                                                       ON to_do.study_room_member_id = m.study_room_member_id
                                            INNER JOIN STUDY_ROOM r ON m.study_room_id = r.study_room_id
                                            INNER JOIN USER u ON m.user_id = u.user_id
                                   WHERE u.username = 'Giselbert'
                                   ORDER BY to_do.created_date
                                   LIMIT 1);

CALL SELECT_STUDY_ROOM_MEMBER_TODO_BY_USERNAME('Giselbert');
-- ì²˜ìŒìœ¼ë¡œ ì‘ì„±ëœ íˆ¬ ë‘ ë¦¬ìŠ¤íŠ¸ ì œê±°
DELETE
FROM STUDY_ROOM_MEMBER_TODO
WHERE study_room_member_todo_id = (SELECT to_do.study_room_member_todo_id
                                   FROM STUDY_ROOM_MEMBER_TODO to_do
                                            INNER JOIN STUDY_ROOM_MEMBER m
                                                       ON to_do.study_room_member_id = m.study_room_member_id
                                            INNER JOIN STUDY_ROOM r ON m.study_room_id = r.study_room_id
                                            INNER JOIN USER u ON m.user_id = u.user_id
                                   WHERE u.username = 'Giselbert'
                                   ORDER BY to_do.created_date
                                   LIMIT 1);

CALL SELECT_STUDY_ROOM_MEMBER_TODO_BY_USERNAME('Giselbert');

```

</div>
</details>

> ## **ì¸ì¦**
<details>
<summary>ì¸ì¦ ì—¬ë¶€ í™•ì¸ í”„ë¡œì‹œì € ìƒì„±</summary>
<div markdown="1">

```sql

USE study_hour;

DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_VERIFICATION_BY_USERNAME(
    USERNAME VARCHAR(15)
)
BEGIN
    SELECT u.username    AS 'ì‘ì„±ì',
           p.plan_detail AS 'ê³„íš',
           v.image_url   AS 'ì¸ì¦ ì‚¬ì§„'
    FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION v
             INNER JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN p
                        ON v.study_room_member_weekly_plan_id = p.study_room_member_weekly_plan_id
             INNER JOIN STUDY_ROOM_MEMBER m ON p.study_room_member_id = m.study_room_member_id
             INNER JOIN USER u ON m.user_id = u.user_id
    WHERE u.username = USERNAME;
END $$
DELIMITER ;

DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_VERIFICATION_EXIST_BY_ROOM_NAME_AND_USERNAME_AND_DURATION(
    STUDY_ROOM_NAME VARCHAR(30),
    USERNAME VARCHAR(15),
    STUDY_ROOM_DURATION INT
)
BEGIN
    SELECT r.name                             AS 'ìŠ¤í„°ë””ë£¸',
           u.username                         AS 'ì‘ì„±ì',
           p.plan_detail                      AS 'ê³„íš',
           p.weekly_plan_round_number         AS 'ì£¼ì°¨',
           NVL2(p.plan_duration, 'ì¸ì¦', 'ë¯¸ì¸ì¦') AS 'ì‹œê°„_ì¸ì¦_ì—¬ë¶€',
           NVL2(v.image_url, 'ì¸ì¦', 'ë¯¸ì¸ì¦')     AS 'ì‚¬ì§„_ì¸ì¦_ì—¬ë¶€'
    FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION v
             RIGHT JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN p
                        ON v.study_room_member_weekly_plan_id = p.study_room_member_weekly_plan_id
             INNER JOIN STUDY_ROOM r ON p.study_room_id = r.study_room_id
             INNER JOIN STUDY_ROOM_MEMBER m ON p.study_room_member_id = m.study_room_member_id
             INNER JOIN USER u ON u.user_id = m.user_id
    WHERE r.name = STUDY_ROOM_NAME
      AND p.weekly_plan_round_number = STUDY_ROOM_DURATION
      AND u.username = USERNAME;
END $$
DELIMITER ;

```

</div>
</details>

<details>
<summary>ì¸ì¦</summary>
<div markdown="1">

```sql

# [5.1.1] [íƒ€ì´ë¨¸ ì¸ì¦]
-- Study Room 1ë²ˆì— ì°¸ê°€í•œ 'Giselbert' ìœ ì € ê³„íš ì‹œê°„ ì—…ë°ì´íŠ¸
UPDATE STUDY_ROOM_MEMBER_WEEKLY_PLAN
SET plan_duration = (plan_duration + 10000)
WHERE study_room_member_weekly_plan_id = 2;

SELECT *
FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN p
         INNER JOIN STUDY_ROOM r ON p.study_room_id = r.study_room_id
         INNER JOIN STUDY_ROOM_MEMBER m ON p.study_room_member_id = m.study_room_member_id
         INNER JOIN USER u On m.user_id = u.user_id
WHERE username = 'Giselbert';

# [5.1.2] [ì‚¬ì§„ ì¸ì¦]
UPDATE STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION
SET image_url = 'ì‚¬ì§„ ì¸ì¦ í…ŒìŠ¤íŠ¸'
WHERE study_room_member_weekly_plan_id = 2;

```

</div>
</details>

<details>
<summary>ìŠ¤í„°ë””ì› ì¸ì¦ ì—¬ë¶€ ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [5.2.1] [ìŠ¤í„°ë””ì› ì¸ì¦ ì—¬ë¶€ ì¡°íšŒ]
# Study Room 1ë²ˆ 2ì£¼ì°¨ ì¸ì¦ì—¬ë¶€ ì¡°íšŒ
CALL SELECT_VERIFICATION_EXIST_BY_ROOM_NAME_AND_USERNAME_AND_DURATION('ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°', 'Giselbert', 2);

```

</div>
</details>

<details>
<summary>ì¸ì¦ ìˆ˜ì •</summary>
<div markdown="1">

```sql

# [5.3.1] [ì¸ì¦ ìˆ˜ì •]
# ì¸ì¦ ì‚¬ì§„ ìˆ˜ì •
UPDATE STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION
SET image_url = 'ì‚¬ì§„ ì¸ì¦ ìˆ˜ì • í…ŒìŠ¤íŠ¸'
WHERE study_room_member_weekly_plan_id = 2;

CALL SELECT_VERIFICATION_BY_USERNAME('Giselbert');

```

</div>
</details>

<details>
<summary>ì¸ì¦ ì‚­ì œ</summary>
<div markdown="1">

```sql

# [5.4.1] [ì¸ì¦ ì‚­ì œ]
-- DELETE PLAN_VERIFICATION_BY_USERNAME_AND_PLAN_DETAIL
DELETE
FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION
WHERE study_room_member_weekly_plan_verification_id = (SELECT v.study_room_member_weekly_plan_verification_id
                                                       FROM STUDY_ROOM_MEMBER_WEEKLY_PLAN_VERIFICATION v
                                                                INNER JOIN STUDY_ROOM_MEMBER_WEEKLY_PLAN p
                                                                           ON v.study_room_member_weekly_plan_id = p.study_room_member_weekly_plan_id
                                                                INNER JOIN STUDY_ROOM_MEMBER m ON p.study_room_member_id = m.study_room_member_id
                                                                INNER JOIN USER u ON m.user_id = u.user_id
                                                       WHERE u.username = 'Giselbert'
                                                         AND p.plan_detail = 'í† ìµ ë‹¨ì–´ 500ê°œ ì™¸ìš°ê¸°');

CALL SELECT_VERIFICATION_BY_USERNAME('Giselbert');

```

</div>
</details>

> ## **ê²Œì‹œíŒ**
<details>
<summary>ê²Œì‹œê¸€ ì‘ì„±</summary>
<div markdown="1">

```sql

# [6.1.1] [ê²Œì‹œê¸€ ì œëª© ì‘ì„±] T
# [6.1.2] [ê²Œì‹œê¸€ ë‚´ìš© ì‘ì„±] T
-- 3ë²ˆ ì°¸ê°€ìê°€ 1ë²ˆ ìŠ¤í„°ë””ë£¸ì— ê²Œì‹œê¸€ ì‘ì„±: (ì œëª©)í…ŒìŠ¤íŠ¸ ê²Œì‹œê¸€ ì‘ì„±í•´ìš” (ë‚´ìš©)ê·¼ë° ì´ê±° ê¼­ ì‘ì„±í•´ì•¼ í•˜ë‚˜ìš”???

INSERT INTO study_room_board (study_room_id, study_room_member_id, title, content, created_date_time)
VALUES (1, 3, 'í…ŒìŠ¤íŠ¸ ê²Œì‹œê¸€ ì‘ì„±í•´ìš”', 'ê·¼ë° ì´ê±° ê¼­ ì‘ì„±í•´ì•¼ í•˜ë‚˜ìš”???', '2024-06-09 13:00:12');


```

</div>
</details>

<details>
<summary>ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [6.2.1] [ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ] T
-- view) 1ë²ˆ ìŠ¤í„°ë””ë£¸ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì „ì²´ ì¡°íšŒ: ì œëª©, ì‘ì„±ì, ì‘ì„±ì¼ -> ìµœì‹ ìˆœ ì •ë ¬
-- * ì…ë ¥ë°›ì€ ìŠ¤í„°ë””ë£¸ ë²ˆí˜¸ì˜ ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ë·°ë¥¼ selectí•´ì„œ ë°˜í™˜í•˜ëŠ” í”„ë¡œì‹œì € ìƒì„±
DELIMITER $$
CREATE OR REPLACE PROCEDURE board_list (
    IN id INT
)
BEGIN
	DECLARE v_sql_statement VARCHAR(500);
	SET v_sql_statement = CONCAT(
        'CREATE OR REPLACE VIEW v_study_room_board AS ',
        'SELECT title, content, b.username, created_date_time ',
        'FROM STUDY_ROOM_BOARD a ',
        'INNER JOIN (SELECT study_room_member_id, b.username ',
        '           FROM STUDY_ROOM_MEMBER a ',
        '           INNER JOIN USER b ON a.user_id = b.user_id) b ',
        'ON a.study_room_member_id = b.study_room_member_id ',
        'WHERE study_room_id = ', id,
        ' ORDER BY created_date_time DESC'
    );
	PREPARE stmt FROM v_sql_statement;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
END $$
DELIMITER ;

CALL board_list(1);

```

</div>
</details>

<details>
<summary>ìƒì„¸ ê²Œì‹œê¸€ ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [6.2.2] [ê²Œì‹œê¸€ ìƒì„¸ ì¡°íšŒ] T
-- 9ë²ˆ ê²Œì‹œê¸€(1ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 6ë²ˆì§¸)ì„ ì¡°íšŒ: ì œëª©, ë‚´ìš©, ì‘ì„±ì, ì‘ì„±ì¼
SELECT title, content, b.username, created_date_time
FROM STUDY_ROOM_BOARD a LEFT JOIN (SELECT study_room_member_id, b.username 
	FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) b
ON a.study_room_member_id = b.study_room_member_id
WHERE title = 'í•œí™” ì½”í…Œ ì¤€ë¹„';

-- ì‚­ì œëœ íšŒì›ì˜ ê²Œì‹œê¸€ì„ ì¡°íšŒ: ì œëª©, ë‚´ìš©, ì‘ì„±ì, ì‘ì„±ì¼ -> ì‘ì„±ì: íƒˆí‡´íšŒì›_nn
SELECT title, content, b.username, created_date_time
FROM STUDY_ROOM_BOARD a LEFT JOIN (SELECT study_room_member_id, b.username 
	FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) b
ON a.study_room_member_id = b.study_room_member_id
WHERE b.username LIKE 'íƒˆí‡´*';

```

</div>
</details>

<details>
<summary>ê²Œì‹œê¸€ ìˆ˜ì • ë° ì‚­ì œ</summary>
<div markdown="1">

```sql

# [6.3] [ê²Œì‹œíŒ ìˆ˜ì •]
# [6.3.1] [ê²Œì‹œê¸€ ìˆ˜ì •] T
-- 9ë²ˆ ê²Œì‹œê¸€(1ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 6ë²ˆì§¸)ì˜ ë‚´ìš© ìˆ˜ì •
UPDATE STUDY_ROOM_BOARD
SET title = 'ê²Œì‹œê¸€ ìˆ˜ì • í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤',
	content = 'ë‚´ìš©ë„ ìˆ˜ì •í•œê±° ì•„ì„¸ìš”? ë‚ ì§œë„ ë³€ê²½ë©ë‹ˆë‹¤.',
	created_date_time = NOW()
WHERE study_room_board_id = 9;

-- ê²Œì‹œê¸€ ìˆ˜ì •ëœ ë‚´ìš© ì¡°íšŒ(ì´ì „ ê²Œì‹œê¸€ ì œëª©ìœ¼ë¡œëŠ” ì¡°íšŒ ì•ˆë¨, ê²Œì‹œê¸€ ì‹ë³„ìë¡œ ìˆ˜ì • ë‚´ìš© í™•ì¸)
SELECT title, content, b.username, created_date_time
FROM STUDY_ROOM_BOARD a LEFT JOIN (SELECT study_room_member_id, b.username 
	FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) b
ON a.study_room_member_id = b.study_room_member_id
WHERE title = 'í•œí™” ì½”í…Œ ì¤€ë¹„';

SELECT title, content, b.username, created_date_time
FROM STUDY_ROOM_BOARD a LEFT JOIN (SELECT study_room_member_id, b.username 
	FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) b
ON a.study_room_member_id = b.study_room_member_id
WHERE study_room_board_id = 9;

# [6.4] [ê²Œì‹œíŒ ì‚­ì œ]
# [6.4.1] [ê²Œì‹œê¸€ ì‚­ì œí•˜ê¸°] T
-- 4ë²ˆ ê²Œì‹œê¸€(1ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 3ë²ˆì§¸) delete í›„ view ì¡°íšŒí•˜ì—¬ ì‚­ì œ í™•ì¸: 6.3.1 í…ŒìŠ¤íŠ¸ ìˆ˜ì • ë‚´ìš©ë„ ê°™ì´ ëŒ€ëµì  í™•ì¸
-- * ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ë ¤ë©´ ì™¸ë˜í‚¤ ì œì•½ì— ì˜í•´ í•´ë‹¹ ëŒ“ê¸€ì„ ë¨¼ì € ì „ë¶€ ì‚­ì œí•˜ê³ , ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ëŠ” ì‘ì—…ì„ ê±°ì³ì•¼ í•¨
-- * ë‘ ì‘ì—…ì„ í•œ ë²ˆì— ì²˜ë¦¬í•˜ê¸° ìœ„í•´, í”„ë¡œì‹œì € ì‚¬ìš©

DELIMITER $$
CREATE PROCEDURE delete_board (
	IN board_id INT
)
BEGIN
	DELETE FROM STUDY_ROOM_BOARD_COMMENT
	WHERE study_room_board_id = board_id;

	DELETE FROM STUDY_ROOM_BOARD
	WHERE study_room_board_id = board_id;
END $$
DELIMITER;

CALL delete_board(4)
CALL board_list(1)

```

</div>
</details>

<details>
<summary>ëŒ“ê¸€ ì‘ì„± ë° ì¡°íšŒ</summary>
<div markdown="1">

```sql

# [6.5.1] [ëŒ“ê¸€ ì‘ì„±í•˜ê¸°] T
-- 28ë²ˆ ê²Œì‹œê¸€(2ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 14ë²ˆì§¸)ì— 7ë²ˆ ì°¸ê°€ìê°€ ëŒ“ê¸€ ì‘ì„±
INSERT INTO study_room_board_comment (study_room_board_id, study_room_member_id, content, created_date_time)
VALUES (28, 7, 'í…ŒìŠ¤íŠ¸ ëŒ“ê¸€ì„ ì‘ì„±í• ê±°ì—ìš”.', NOW());

# [6.5.2] [ëŒ“ê¸€ ì¡°íšŒí•˜ê¸°] T
-- 28ë²ˆ ê²Œì‹œê¸€(2ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 14ë²ˆì§¸)ì˜ 'ì œëª©'ìœ¼ë¡œ ëŒ“ê¸€ ì¡°íšŒ
-- ê²Œì‹œê¸€ ì œëª©ìœ¼ë¡œ ëŒ“ê¸€ì„ ì¡°íšŒí•˜ëŠ” í”„ë¡œì‹œì € ìƒì„±, ì¡°íšŒ ì¡°ê±´: (ê²Œì‹œê¸€)ì œëª©, ë‚´ìš©, ì‘ì„±ì, ì‘ì„±ì¼ (ëŒ“ê¸€)ì‘ì„±ì, ë‚´ìš©, ì‘ì„±ì¼
DELIMITER $$
CREATE OR REPLACE PROCEDURE board_comment (
    IN board_title VARCHAR(100)
)
BEGIN
	SELECT c.username, a.content, a.created_date_time
    FROM STUDY_ROOM_BOARD_COMMENT a
    LEFT JOIN STUDY_ROOM_BOARD b ON a.study_room_board_id = b.study_room_board_id
    LEFT JOIN (SELECT study_room_member_id, b.username 
	    FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) c ON a.study_room_member_id = c.study_room_member_id
    WHERE b.title = board_title;
END $$
DELIMITER ;

CALL board_comment('ê³ ë“±í•™êµ ìˆ˜í•™ ì™„ì „ì •ë³µ');

```

</div>
</details>

<details>
<summary>ëŒ“ê¸€ ìˆ˜ì • ë° ì‚­ì œ</summary>
<div markdown="1">

```sql

# [6.5.3] [ëŒ“ê¸€ ì‚­ì œí•˜ê¸°] T
-- 'Ellary'ìœ ì €(10ë²ˆ ì°¸ê°€ì)ê°€ ìì‹ ì˜ ëŒ“ê¸€ì„ ëª¨ë‘ ì‚­ì œ
-- ì „ì²´ ëŒ“ê¸€ ì¤‘ 'Ellary'ê°€ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒí•´ì„œ í™•ì¸
DELETE FROM STUDY_ROOM_BOARD_COMMENT
WHERE study_room_member_id = 10;

SELECT c.username, a.content, a.created_date_time
FROM STUDY_ROOM_BOARD_COMMENT a
LEFT JOIN STUDY_ROOM_BOARD b ON a.study_room_board_id = b.study_room_board_id
LEFT JOIN (SELECT study_room_member_id, b.username 
	FROM STUDY_ROOM_MEMBER a LEFT JOIN USER b ON a.user_id = b.user_id) c ON a.study_room_member_id = c.study_room_member_id
WHERE c.username = 'Ellary';

# [6.5.4] [ëŒ“ê¸€ ìˆ˜ì •í•˜ê¸°] T
-- 28ë²ˆ ê²Œì‹œê¸€(2ë²ˆ ìŠ¤í„°ë””ë£¸ì˜ 14ë²ˆì§¸)ì—ì„œ 'Betti'ìœ ì €(6ë²ˆ ì°¸ê°€ì)ê°€ ëŒ“ê¸€ ìˆ˜ì •
-- 28ë²ˆ ê²Œì‹œê¸€ ì¡°íšŒí•´ì„œ ìˆ˜ì •ëœ ëŒ“ê¸€ í™•ì¸('Ellary'ì˜ ì‚­ì œëœ ëŒ“ê¸€ë„ ê°™ì´ í™•ì¸)
UPDATE STUDY_ROOM_BOARD_COMMENT
SET content = 'ì¡°ê¸ˆì”© ì•„ë‹ˆê³  ëŒ€í­ ë‚˜ì•„ì§€ê³  ìˆì–´ìš”.',
	create_date_time = NOW()
WHERE study_room_board_id = 28 AND study_room_member_id = 6;

CALL board_comment('ê³ ë“±í•™êµ ìˆ˜í•™ ì™„ì „ì •ë³µ');

```

</div>
</details>


> ## **ë²Œê¸ˆ**
<details>
<summary>ë²Œê¸ˆ ì•¡ìˆ˜ ì§‘ê³„</summary>
<div markdown="1">

```sql

-- ìŠ¤í„°ë””ë£¸ ìƒì„± ì‹œ ì…ë ¥ë˜ì—ˆë˜ ì¸ì¦ ì£¼ê¸°(1ì£¼ ê¸°ì¤€), ì¸ì¦ ë°©ë²•, ë²Œê¸ˆ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•¡ìˆ˜ê°€ ì§‘ê³„ëœë‹¤.
SELECT 
    sr.study_room_id,
    sr.authentication_method,
    sr.fine,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members,
    SUM(CASE WHEN ss.attendance = 'PRESENT' THEN 1 ELSE 0 END) AS total_attended_rounds,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) AS total_achieved_todos,
    SUM(CASE WHEN ss.pay_fine = '12000' THEN 1 ELSE 0 END) AS total_fined_rounds,
    SUM(CASE WHEN ss.pay_fine = '12000' THEN srmf.fine_amount ELSE 0 END) AS total_fine_amount
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
LEFT JOIN 
    STUDY_ROOM_MEMBER_FINE srmf ON srm.study_room_member_id = srmf.study_room_member_id
GROUP BY 
    sr.study_room_id, sr.authentication_method, sr.fine;
    

SELECT * FROM statistics;

```

</div>
</details>

<details>
<summary>ì„±ì·¨ë„ì™€ íšŒì°¨ì— ë”°ë¥¸ ë²Œê¸ˆ ì•¡ìˆ˜ ì§‘ê³„</summary>
<div markdown="1">

```sql

-- ë²Œê¸ˆì€ ê¸°ê°„ ë‹¨ìœ„ ë‚´ ìŠ¤í„°ë””ì› ì„±ì·¨ ì—¬ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ 70% ì´í•˜ ì„±ì·¨ ì‹œ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤.
SELECT 
    sr.study_room_id,
    sr.authentication_method,
    sr.fine,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members,
    SUM(CASE WHEN ss.attendance = 'PRESENT' THEN 1 ELSE 0 END) AS total_attended_rounds,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) AS total_achieved_todos,
    SUM(CASE WHEN ss.pay_fine = '12000' THEN 1 ELSE 0 END) AS total_fined_rounds,
    SUM(CASE WHEN ss.pay_fine = '12000' AND 
        (SELECT 
            COUNT(*) 
        FROM 
            STATISTICS 
        WHERE 
            study_room_id = sr.study_room_id 
            AND todo_achievement = 'ACHIEVED'
            AND pay_fine = '12000'
        ) / NULLIF(
            (SELECT 
                COUNT(*) 
            FROM 
                STATISTICS 
            WHERE 
                study_room_id = sr.study_room_id 
                AND pay_fine = 'YES'
            ), 0) <= 0.7 THEN 1 ELSE 0 END) AS total_fined_due_to_achievement_rate,
    SUM(CASE WHEN ss.pay_fine = 'YES' THEN srmf.fine_amount ELSE 0 END) AS total_fine_amount
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
LEFT JOIN 
    STUDY_ROOM_MEMBER_FINE srmf ON srm.study_room_member_id = srmf.study_room_member_id
GROUP BY 
    sr.study_room_id, sr.authentication_method, sr.fine;


-- ì§‘ê³„ëœ ë²Œê¸ˆ ì•¡ìˆ˜ëŠ” ì£¼ê°„ ë‹¨ìœ„ ë‹¤ìŒë‚  05:00 ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë˜ì–´ì•¼ í•œë‹¤.
 SELECT *
FROM STUDY_ROOM_MEMBER_FINE
WHERE DATE_ADD(NOW(), INTERVAL 1 WEEK) >= DATE_FORMAT(NOW(), '%Y-%m-%d 05:00:00');



-- ì§‘ê³„ëœ ë²Œê¸ˆ ì•¡ìˆ˜ëŠ” ì£¼ê°„ ë‹¨ìœ„ ê¸°ì¤€ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤.
UPDATE STUDY_ROOM_MEMBER_FINE
SET fine_amount = 0
WHERE DAYOFWEEK(NOW()) = 2 AND HOUR(NOW()) = 5; -- ì›”ìš”ì¼ ì˜¤ì „ 5ì‹œ


-- STUDY_ROOM_MEMBER_FINE í…Œì´ë¸”ì— ë”ë¯¸ ë°ì´í„° ì‚½ì…
INSERT INTO STUDY_ROOM_MEMBER_FINE (study_room_member_id, get_fine_round, fine_amount)
VALUES 
    (1, 1, 100),
    (2, 1, 200),
    (3, 1, 0),
    (4, 1, 300);

-- ì£¼ê°„ ë²Œê¸ˆ ì´ˆê¸°í™” ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— í˜„ì¬ STUDY_ROOM_MEMBER_FINE í…Œì´ë¸”ì˜ ë°ì´í„° ì¶œë ¥
SELECT * FROM STUDY_ROOM_MEMBER_FINE;

-- ì£¼ê°„ ë²Œê¸ˆ ì´ˆê¸°í™” ì¿¼ë¦¬ ì‹¤í–‰
UPDATE STUDY_ROOM_MEMBER_FINE
SET fine_amount = 0
WHERE DAYOFWEEK(NOW()) = 2 AND HOUR(NOW()) = 5; -- ì›”ìš”ì¼ ì˜¤ì „ 5ì‹œ

-- ì£¼ê°„ ë²Œê¸ˆ ì´ˆê¸°í™” í›„ STUDY_ROOM_MEMBER_FINE í…Œì´ë¸”ì˜ ë°ì´í„° ì¶œë ¥
SELECT * FROM STUDY_ROOM_MEMBER_FINE;

-- ì£¼ê°„ ë²Œê¸ˆ ì•¡ìˆ˜ê°€ ì£¼ê°„ ë‹¨ìœ„ ë‹¤ìŒë‚  05:00 ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚°ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” ì¿¼ë¦¬
SELECT *
FROM STUDY_ROOM_MEMBER_FINE
WHERE DATE_ADD(NOW(), INTERVAL 1 WEEK) >= DATE_FORMAT(NOW(), '%Y-%m-%d 05:00:00');

```

</div>
</details>

<details>
<summary>ë²Œê¸ˆ ëŒ€ìƒ ì§‘ê³„</summary>
<div markdown="1">

```sql

-- ìŠ¤í„°ë””ë£¸ ìƒì„± ì‹œ ì…ë ¥ë˜ì—ˆë˜ ì¸ì¦ ì£¼ê¸°, ì¸ì¦ ë°©ë²• ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëŒ€ìƒì„ ì§‘ê³„í•œë‹¤.
SELECT 
    sr.study_room_id,
    sr.authentication_method,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
GROUP BY 
    sr.study_room_id, sr.authentication_method;

```

</div>
</details>

<details>
<summary>ì„±ì·¨ë„ì™€ íšŒì°¨ì— ë”°ë¥¸ ë²Œê¸ˆ ëŒ€ìƒ ì§‘ê³„</summary>
<div markdown="1">

```sql

-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ë‚´ ìŠ¤í„°ë””ì› ì„±ì·¨ ì—¬ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ 70% ì´í•˜ ì„±ì·¨ ì‹œ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤.
SELECT 
    sr.study_room_id,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) AS total_achieved_todos,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) / NULLIF(COUNT(DISTINCT srm.study_room_member_id), 0) AS achievement_rate
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
GROUP BY 
    sr.study_room_id
HAVING 
    achievement_rate <= 0.7;

-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ë‹¤ìŒë‚  05:00ì‹œ ê¸°ì¤€ìœ¼ë¡œ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤.
SELECT 
    sr.study_room_id,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
WHERE 
    DATE_ADD(DATE_FORMAT(NOW(), '%Y-%m-%d 05:00:00'), INTERVAL 1 DAY) <= NOW()
GROUP BY 
    sr.study_room_id;



-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ê¸°ì¤€ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤.

-- ê¸°ê°„ ë‹¨ìœ„ë¡œ ì´ˆê¸°í™”í•˜ëŠ” ì¿¼ë¦¬ (ì˜ˆë¥¼ ë“¤ì–´, ë§¤ì£¼ ì›”ìš”ì¼ ì˜¤ì „ 5ì‹œì— ì‹¤í–‰)
UPDATE 
    STUDY_ROOM_MEMBER_FINE
SET 
    fine_amount = 0
WHERE 
    DAYOFWEEK(NOW()) = 2 AND HOUR(NOW()) = 5; -- ì›”ìš”ì¼ ì˜¤ì „ 5ì‹œ
   
-- ìŠ¤í„°ë””ë£¸ ìƒì„± ì‹œ ì…ë ¥ë˜ì—ˆë˜ ì¸ì¦ ì£¼ê¸°, ì¸ì¦ ë°©ë²• ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëŒ€ìƒì„ ì§‘ê³„í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
SELECT 
    sr.study_room_id,
    sr.authentication_method,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
GROUP BY 
    sr.study_room_id, sr.authentication_method;

-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ë‚´ ìŠ¤í„°ë””ì› ì„±ì·¨ ì—¬ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ 70% ì´í•˜ ì„±ì·¨ ì‹œ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤.
SELECT 
    sr.study_room_id,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) AS total_achieved_todos,
    SUM(CASE WHEN ss.todo_achievement = 'ACHIEVED' THEN 1 ELSE 0 END) / NULLIF(COUNT(DISTINCT srm.study_room_member_id), 0) AS achievement_rate
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
GROUP BY 
    sr.study_room_id
HAVING 
    achievement_rate <= 0.7;

-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ë‹¤ìŒë‚  05:00ì‹œ ê¸°ì¤€ìœ¼ë¡œ ì§‘ê³„ë˜ì–´ì•¼ í•œë‹¤.
SELECT 
    sr.study_room_id,
    COUNT(DISTINCT srm.study_room_member_id) AS total_members
FROM 
    STUDY_ROOM sr
LEFT JOIN 
    STUDY_ROOM_MEMBER srm ON sr.study_room_id = srm.study_room_id
LEFT JOIN 
    STATISTICS ss ON sr.study_room_id = ss.study_room_id
WHERE 
    DATE_ADD(DATE_FORMAT(NOW(), '%Y-%m-%d 05:00:00'), INTERVAL 1 DAY) <= NOW()
GROUP BY 
    sr.study_room_id;

-- ë²Œê¸ˆ ëŒ€ìƒì€ ê¸°ê°„ ë‹¨ìœ„ ê¸°ì¤€ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•œë‹¤.
-- ì´ˆê¸°í™” ì „
SELECT * FROM STUDY_ROOM_MEMBER_FINE;

-- ë²Œê¸ˆ ëŒ€ìƒì„ ê¸°ê°„ ë‹¨ìœ„ë¡œ ì´ˆê¸°í™”
UPDATE 
    STUDY_ROOM_MEMBER_FINE
SET 
    fine_amount = 0
WHERE 
    DAYOFWEEK(NOW()) = 2 AND HOUR(NOW()) = 5; -- ì›”ìš”ì¼ ì˜¤ì „ 5ì‹œ

-- ì´ˆê¸°í™” í›„
SELECT * FROM STUDY_ROOM_MEMBER_FINE;

```

</div>
</details>

> ## **í†µê³„**
<details>
<summary>ì£¼ê°„ ê³„íš ê´€ë ¨ í†µê³„</summary>
<div markdown="1">

```sql

-- 9.1.1 ì£¼ê°„ê³„íš ì´ ê°œìˆ˜ ì§‘ê³„
-- ex : ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸° ê·¸ë£¹ ìœ ì €ë“¤ì˜ 1íšŒì°¨ ì£¼ê°„ê³„íš ê°œìˆ˜ ì¶œë ¥
SELECT sr.name AS 'group name',
       u.username,
       COUNT(*) AS 'num of plan'
FROM study_room_member srm
INNER JOIN user u ON u.user_id = srm.user_id
INNER JOIN study_room_member_weekly_plan wp ON wp.study_room_member_id = srm.study_room_member_id
INNER JOIN study_room sr ON sr.study_room_id = srm.study_room_id
WHERE sr.name = 'ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°'
AND wp.weekly_plan_round_number = 1
AND srm.is_join_accepted = 1
GROUP BY sr.name, u.username
ORDER BY COUNT(*) DESC
;

-- 9.1.2 ì£¼ê°„ê³„íš ì´ ì†Œìš”ì‹œê°„ ì§‘ê³„
-- sec_to_time ë©”ì†Œë“œ ì´ìš©
SELECT sr.name AS 'group name',
       u.username,
       SEC_TO_TIME(SUM(wp.plan_duration)) AS 'total time'
FROM study_room_member srm
INNER JOIN user u ON u.user_id = srm.user_id
INNER JOIN study_room_member_weekly_plan wp ON wp.study_room_member_id = srm.study_room_member_id
INNER JOIN study_room sr ON sr.study_room_id = srm.study_room_id
WHERE sr.name = 'ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°'
AND wp.weekly_plan_round_number = 1
AND srm.is_join_accepted = 1
GROUP BY sr.name, u.username
ORDER BY COUNT(*) DESC
;

```

</div>
</details>

<details>
<summary>ì£¼ê°„ ê³„íš í‰ê°€ ê´€ë ¨ í†µê³„</summary>
<div markdown="1">

```sql

-- 9.2 ì£¼ê°„ ê³„íš í‰ê°€ ì§‘ê³„
-- ìë°”ë¡œ~ ê·¸ë£¹ì˜ 1íšŒì°¨ ì£¼ê°„ ê³„íš í‰ê°€ê°œìˆ˜
SELECT sr.name AS 'group name',
       u.username,
       COUNT(ev.study_room_member_weekly_plan_evaluation_id) AS 'num of evaluation'
FROM study_room_member srm
INNER JOIN user u ON u.user_id = srm.user_id
INNER JOIN study_room_member_weekly_plan wp ON wp.study_room_member_id = srm.study_room_member_id
INNER JOIN study_room sr ON sr.study_room_id = srm.study_room_id
INNER JOIN study_room_member_weekly_plan_evaluation ev ON ev.study_room_member_weekly_plan_id = wp.study_room_member_weekly_plan_id
WHERE sr.name = 'ìë°”ë¡œ ì•Œê³ ë¦¬ì¦˜ ê³µë¶€í•˜ê¸°'
AND wp.weekly_plan_round_number = 1
AND srm.is_join_accepted = 1
GROUP BY sr.name, u.username
ORDER BY 3 DESC;

```

</div>
</details>

<details>
<summary>ë²Œê¸ˆ ê´€ë ¨ í†µê³„</summary>
<div markdown="1">

```sql

# ë²Œê¸ˆ ì•¡ìˆ˜ ì§‘ê³„ í†µê³„ ì¿¼ë¦¬(íƒˆí‡´ íšŒì› ì œì™¸, ë™ìˆœìœ„ rank)

use study_hour;

DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_FINE_COUNT_RANK_BY_ROOM_ID (
    room_id INT
)
BEGIN
    SELECT c.username, get_fine_round, sum(fine_amount) as total_fine_amount, RANK() OVER (PARTITION BY get_fine_round ORDER BY sum(fine_amount) DESC) AS rank
    FROM STUDY_ROOM_MEMBER_FINE a
             INNER JOIN STUDY_ROOM_MEMBER b ON a.study_room_member_id = b.study_room_member_id
             INNER JOIN USER c ON b.user_id = c.user_id
    WHERE b.study_room_id = room_id AND c.username NOT LIKE 'íƒˆí‡´*'
    GROUP BY c.username
    ORDER BY total_fine_amount DESC;
end $$
DELIMITER ;

CALL SELECT_FINE_COUNT_RANK_BY_ROOM_ID(1);

```

</div>
</details>

<details>
<summary>ê²Œì‹œê¸€ ê´€ë ¨ í†µê³„</summary>
<div markdown="1">

```sql

use study_hour;

# ìŠ¤í„°ë””ë£¸ ë‚´ ê²Œì‹œê¸€ ì‘ì„± ê°œìˆ˜ ìˆœìœ„
DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_BOARD_COUNT_RANK_BY_ROOM_ID(
    ROOM_ID int
)
BEGIN
    SELECT u.username                           AS 'ì‘ì„±ì',
           COUNT(*)                             AS 'ì‘ì„±_ê°œìˆ˜',
           RANK() over (ORDER BY COUNT(*) DESC) AS 'ê²Œì‹œê¸€_ì‘ì„±_ê°œìˆ˜_ìˆœìœ„'
    FROM STUDY_ROOM_BOARD b
             INNER JOIN STUDY_ROOM_MEMBER m ON b.study_room_member_id = m.study_room_member_id
             INNER JOIN USER u ON m.user_id = u.user_id
    WHERE m.study_room_id = ROOM_ID
      AND u.username NOT LIKE 'íƒˆí‡´%'
      AND u.nickname NOT LIKE 'íƒˆí‡´%'
    GROUP BY u.username
    ORDER BY 'ê²Œì‹œê¸€_ì‘ì„±_ê°œìˆ˜_ìˆœìœ„';
end $$
DELIMITER ;

CALL SELECT_BOARD_COUNT_RANK_BY_ROOM_ID(1);

```

</div>
</details>

<details>
<summary>ëŒ“ê¸€ ê´€ë ¨ í†µê³„</summary>
<div markdown="1">

```sql

USE study_hour;

# ìŠ¤í„°ë””ë£¸ì—ì„œ ëŒ“ê¸€ì„ ë‹¨ ì‚¬ëŒ ìˆœìœ„
DELIMITER $$
CREATE OR REPLACE PROCEDURE SELECT_COMMENT_COUNT_RANK_BY_ROOM_ID(
    ROOM_ID INT
)
BEGIN
    SELECT u.username                           AS 'ìœ ì €_ì•„ì´ë””',
           RANK() over (ORDER BY COUNT(*) DESC) AS 'ëŒ“ê¸€_ì‘ì„±_ê°œìˆ˜_ìˆœìœ„'
    FROM STUDY_ROOM_BOARD_COMMENT c
             INNER JOIN STUDY_ROOM_BOARD b ON c.study_room_board_id = b.study_room_board_id
             INNER JOIN STUDY_ROOM_MEMBER m ON c.study_room_member_id = m.study_room_member_id
             INNER JOIN USER u ON m.user_id = u.user_id
    WHERE m.study_room_id = ROOM_ID
      AND u.username NOT LIKE 'íƒˆí‡´%'
      AND u.nickname NOT LIKE 'íƒˆí‡´%'
    GROUP BY u.username;
end $$
DELIMITER ;

CALL SELECT_COMMENT_COUNT_RANK_BY_ROOM_ID(1);

CALL SELECT_COMMENT_COUNT_RANK_BY_ROOM_ID(2);

```

</div>
</details>
